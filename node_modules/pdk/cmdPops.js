var x=exports,
   fs = require('fs'),
   pfs=require('pops/pops.fs.js');
   DoCmd=x.DoCmd=function(cm){
      var n=cm.nam,n=n?n:cm.S,z,a=cm.args;
      if(0){}
      else if(n=='pops'){
         z=a.length&&a[0].typ=='txt'?a[0].val.Trim():null;
         if(0){}
         else if(z=='create')PCreate.ACall(cm);
         else return false;
      }
      else return false;
      return true;
   },
   
   PCreate=function(cm){
      var a=cm.args,z,p,
         n=a.length>1&&a[1].typ=='txt'?a[1].val:'',
         path=require('path')
      ;
      if(n==''){cout('You must specify a project name.\nExample: pops create,MyProject\n');DoMain();}
      else{
         z=process.cwd();p=path.join(z,n);
         path.exists(p,function(v){
            if(v){
               cout('Can not create project "'+n+'" in dir "'+z+
                  '" because the path "'+p+'" already exists.\n'
               );
               DoMain();
            }
            else(function(nm){
               cout('pfs.MkDir');
               pfs.MkDir(p,function(err){DoMain()});
            }.ACall(n));
         });
      };
   }

;
